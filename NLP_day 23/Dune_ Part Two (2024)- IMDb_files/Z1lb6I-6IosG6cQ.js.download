!function s(a,r,l){function u(i,t){if(!r[i]){if(!a[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(c)return c(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var o=r[i]={exports:{}};a[i][0].call(o.exports,function(t){var e=a[i][1][t];return u(e||t)},o,o.exports,s,a,r,l)}return r[i].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,i){"use strict";function n(t){var e=[];for(var i in t)null!==t[i]&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}Object.defineProperty(i,"__esModule",{value:!0}),i.constructRefinementsString=n,i.createUrl=function(t,e){return e+(-1<e.indexOf("?")?"&":"?")+n(t)}},{}],2:[function(t,e,i){"use strict";var p,n,g=t(1),v=t(5);p=jQuery,n=window,document,"imdb"in n||(n.imdb={}),n.imdb.ListerLoad=function(t,e){var s,i=p(t),o={},n={externalCallbacks:[],ajaxRequestURL:""},a=i.find(".lister-list"),r=i.find(".load-more-data").first(),l=r.find("#load-more-trigger").first(),u=this,c=i.find(".lister-working"),d=function(){i.on("click","#load-more-trigger",f)},h=function(t,e){if(c.hide(),null!==t){var i=(0,v.updateContainerItems)(t[0],a[0],r[0],e);p(window).trigger("bindloadlate");var n=s.externalCallbacks.length;if(n)for(var o=0;o<n;o++)s.externalCallbacks[o].call(u,i)}},f=function(t){var e,i,n;t&&(e=p(t.target).attr("ref-marker"),o.ref_=e),o.paginationKey=r.attr("data-key"),(0,v.updateLoadMoreState)(l[0],v.LOADING_STATE_CLASS),i=(0,g.createUrl)(o,s.ajaxRequestURL),n=!1,p.ajax({url:i,success:function(t){h(p(t),n)},error:function(){h(null,n)}})};s=p.extend(!0,{},n,e),d(),p(window).trigger("bindloadlate")},p.fn.listerload=function(e){return this.each(function(){var t=new n.imdb.ListerLoad(this,e);p(this).data("listerload",t)})}},{1:1,5:5}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.autoInit=s;var n,o=t("jquery"),l=(n=o)&&n.__esModule?n:{default:n};function s(t){t.forEach(function(t){var e=(0,l.default)(t).hasClass("overflow-menu")?(0,l.default)(t):(0,l.default)(".overflow-menu",t).first();if(e.length){var i=void 0,n=!1,o=e.find(".pop-up-dialog").first(),s=o.attr("id"),a="#"+s;void 0===s&&(a=""),o.dialog({autoOpen:!1,appendTo:".vertical-ellipsis"+a,width:"auto",minHeight:"auto",open:function(){i=!0,(0,l.default)(document).on("click",function(){(i||n)&&(o.dialog("close"),n=!1),i=!0})},focus:function(){i=!1},close:function(){(0,l.default)(document).off("click")}});var r=e.find(".vertical-ellipsis").first();s=r.attr("id"),a="#"+s,void 0===s&&(a=""),r.on("click",function(){(0,l.default)(".pop-up-dialog"+a).dialog("open"),i=!1}),e.find(".ui-dialog").first().on("click",function(){n=!0})}})}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".overflow-menu");t&&s(Array.from(t))})},{jquery:"jquery"}],4:[function(t,e,i){"use strict";var n,o=t(28),s=t(8),a=t(3),r=t(6),l=t("jquery"),u=(n=l)&&n.__esModule?n:{default:n},c=t(9);function d(t){if(t){var e=t.map(function(t){return h()?t.querySelector(".imdb-user-review"):t});(0,s.makeCollapsable)(e),e.forEach(function(t){var e=t.querySelector(".ipl-expander");e&&(0,o.expander)(e)}),h()?(0,r.initReviewFooterModalsFromReviews)(e):((0,c.autoInitElementsInArray)(e),(0,a.autoInit)(e))}}function h(){return null!==window.location.href.match("^https?://m\\.[^/]*imdb\\..*")}(0,u.default)(function(){var t=(0,u.default)(".load-more-data");t.length&&u.default.fn.listerload&&(0,u.default)(".lister").listerload({externalCallbacks:[d],ajaxRequestURL:t.attr("data-ajaxurl")})})},{28:28,3:3,6:6,8:8,9:9,jquery:"jquery"}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.updateLoadMoreState=c,i.updatePaginationKeyFromContainer=d,i.updateContainerItems=function(t,e,i,n){n&&function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}(e);var o=t.querySelector(u),s=void 0;null!=o&&(a=o.children,r=e,l=[],Array.from(a).forEach(function(t){r.appendChild(t),l.push(t)}),s=l);var a,r,l;return d(t,i),s};var o=i.LOADED_STATE_CLASS="ipl-load-more--loaded",n=i.LOADING_STATE_CLASS="ipl-load-more--loading",s=i.LOADED_ALL_STATE_CLASS="ipl-load-more--loaded-all",a=i.ERROR_STATE_CLASS="ipl-load-more--error",r=(i.DEFAULT_ERROR_MESSAGE="An error has occured. Please try again.",i.DEFAULT_TRIGGER_ELEMENT_QUERY_SELECTOR="#load-more-trigger"),l=i.DEFAULT_DATA_ELEMENT_QUERY_SELECTOR=".load-more-data",u=i.DEFAULT_LIST_QUERY_SELECTOR=".lister-list";function c(t,e){var i=t.parentElement;i.classList.remove(o),i.classList.remove(n),i.classList.remove(s),i.classList.remove(a),i.classList.add(e)}function d(t,e){var i=t.querySelector(l),n=e.querySelector(r);null!=i&&i.getAttribute("data-key")?(e.setAttribute("data-key",i.getAttribute("data-key")),c(n,o)):(e.removeAttribute("data-key"),c(n,s))}},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.autoInit=function(t){var e=t.querySelectorAll(".review-footer-modal");e&&n(e)},i.initReviewFooterModalsFromReviews=function(t){t.forEach(function(t){o(t.querySelector(".review-footer-modal"))})},i.initReviewFooterModals=n;var s=t(8),l=t(7),a="You found this to be helpful",u="You found this to not be helpful",c="There was a problem collecting your vote",d="UP";function n(t){t.forEach(function(t){o(t)})}function o(e){var r;(r=e).querySelector(".review-footer-modal-menu").addEventListener("click",function(t){t.stopPropagation();var e,i,n,o,s,a=r.querySelector(".review-footer-modal-expanded-controls");(0,l.setVisibilityVisible)(a),e=a,i=l.setVisibilityEmpty,n=l.setVisibilityEmpty,o=function(){document.removeEventListener("click",s)},s=function(t){e.contains(t.target)?n(e):i(e),o()},document.addEventListener("click",s)}),e.querySelectorAll(".review-bartlet-voting").forEach(function(t){var n,o;t.addEventListener("click",(n=t,o=e,function(){(0,s.recordReviewVote)(n.dataset.value,o.dataset.voteUrl).then(function(t){return e=o,i=n.dataset.value,void h(e,i===d?a:u);var e,i}).catch(function(t){return h(o,c)}),o.querySelectorAll(".review-bartlet-voting-actions").forEach(l.hideElement)}))})}function h(t,e){t.querySelector(".review-bartlet-voting-message").innerHTML=e}},{7:7,8:8}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.autoInitListerControlsForm=function(){var e=this,t=document.querySelector(".lister-controls-icon"),i=document.querySelector('form[name="lister-controls"]');if(t&&i){var n=h(i),o=i.querySelector(".lister-expanded-controls");t.addEventListener("click",function(t,e,i){n=e,n.classList.contains("hidden")?c(e):(u(t,e,i),d(e));var n}.bind(this,i,o,n));var s=i.querySelector(".lister-controls-apply");s&&s.addEventListener("click",function(t,e,i){u(t,e,i),d(e)}.bind(this,i,o,n));var a=i.querySelectorAll(".lister-sort-direction");a&&a.forEach(function(t){t.addEventListener("click",function(t,e){var i=e.target.getAttribute("data-sort-direction");n=i,document.querySelectorAll(".lister-sort-direction").forEach(function(t){"asc"===n?(t.classList.remove("ascending"),t.classList.add("descending"),t.setAttribute("title","Descending Order"),t.setAttribute("data-sort-direction","desc")):(t.classList.remove("descending"),t.classList.add("ascending"),t.setAttribute("title","Ascending Order"),t.setAttribute("data-sort-direction","asc"))});var n;var o=t.querySelector('input[name="dir"]');o&&(o.value="asc"===i?"desc":"asc")}.bind(e,i))});var r=i.querySelectorAll('input[name="ratingFilter"]');if(r){var l=i.querySelector("#rating-filter-clear");r.forEach(function(t){t.addEventListener("change",c.bind(e,l))}),l.addEventListener("click",function(t,e){i=t,i.querySelector('input[name="ratingFilter"]:checked').checked=!1,d(e.target);var i}.bind(this,i))}}},i.showElement=c,i.setVisibilityVisible=function(t){t.style.visibility="visible"},i.setVisibilityEmpty=function(t){t.style.visibility=""},i.hideElement=d;var n=i.SORT_KEY="sort",o=i.SORT_DIRECTION_KEY="dir",s=i.IS_SPOILER_KEY="spoiler",a=i.RATING_FILTER="ratingFilter";function u(t,e,i){var n,o,s=h(e);n=i,o=s,JSON.stringify(n)!==JSON.stringify(o)&&t.submit()}function c(t){t.classList.remove("hidden")}function d(t){t.classList.add("hidden")}function h(t){var e={};return r(e,n,function(t){var e=t.querySelector('input[name="sort"]:checked');if(!e)return null;return e.value}(t)),r(e,o,function(t){var e=t.querySelector('input[name="dir"]');if(!e)return null;return e.value}(t)),r(e,s,function(t){var e=t.querySelector('input[name="spoiler"]:checked');if(!e)return null;return e.value}(t)),r(e,a,function(t){var e=t.querySelector('input[name="ratingFilter"]:checked');if(!e)return null;return e.value}(t)),e}function r(t,e,i){i&&(t[e]=i)}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeCollapsable=n,i.recordReviewVote=l,i.autoInitListerControlsForm=function(){var e=document.querySelector('form[name="lister-controls"]');if(e){var t=e.querySelector(".lister-sort-direction"),i=e.querySelector('input[name="dir"]');t&&t.addEventListener("click",function(t){i.value="asc"===i.value?"desc":"asc",e.submit()})}};var o=t("iui"),c=300,d=100,h=400,f=100;function n(t){t.forEach(function(t){var n,o,s,a,e;"true"!==t.getAttribute("data-initialized")&&(t.querySelector(".spoiler-warning")?(a=t,0!==(e=Array.from(a.querySelectorAll(".spoiler-warning__control"))).length&&(e.forEach(function(t){t.addEventListener("click",function(){var t=a.querySelector(".content"),e=t.style.maxHeight;if("none"===e)t.style.maxHeight="0px",r(a);else{t.style.maxHeight="none";var i=a.querySelector(".actions");p(i,a)}})}),r(a))):0<t.className.indexOf("collapsable")&&function(a){var r=null!==a.querySelector(".mobile-review-teaser"),t=r?f:h,l=a.firstElementChild,e=parseInt(l.scrollHeight),i=a.querySelector(".actions");i&&(t+=parseInt(i.scrollHeight,10));if(t<e){var u=a.querySelector(".show-more");u.className=u.className.replace("hidden","");var n=Array.from(a.querySelectorAll(".show-more__control"));n.forEach(function(t){l.style.maxHeight=r?d+"px":c+"px",t.addEventListener("click",function(){if(r)i=u,n=(e=a).firstElementChild,o=n.style.maxHeight,s=e.querySelector(".ipl-expander"),"none"===o?(n.style.maxHeight=d+"px",e.removeChild(s),i.appendChild(s),e.appendChild(i),window.location.hash="",window.location.hash="review-teaser",g("urv_tsr_clps","review-teaser-collapse")):(n.style.maxHeight="none",e.removeChild(i),e.appendChild(s),g("urv_tsr_exp","review-teaser-expand"));else{var t=a.querySelector(".actions");u.parentNode.removeChild(u),l.style.maxHeight="none",p(t,a)}var e,i,n,o,s})}),function(t){var e=t.querySelector(".actions");if(e){e.parentNode.removeChild(e);var i=t.querySelector(".text");i.classList.add("clickable");var n=t.querySelector(".gradient-footer");n.appendChild(e)}}(a)}else{l.style.maxHeight="none";var o=a.querySelector(".actions");p(o,a)}}(t),n=t,o=Array.from(n.querySelectorAll("button")),s=n.querySelector(".actions"),o.forEach(function(t){t.addEventListener("click",function(t){o.forEach(function(t){t.setAttribute("disabled","disabled")});var e=t.target.getAttribute("data-value"),i=n.getAttribute("data-vote-url");l(e,i).then(function(t){s.innerHTML=t?"Thank you! Your vote will be counted and appear on this site shortly.":"There was a problem collecting your vote."}).catch(function(t){s.innerHTML="There was a problem collecting your vote."})})}),t.setAttribute("data-initialized","true"))})}function r(t){var e=t.querySelector(".actions");if(e){e.parentNode.removeChild(e);var i=t.querySelector(".lister-item-content");i.insertBefore(e,i.children[4])}}function p(t,e){var i=e.querySelector(".content");t&&(i.insertBefore(t,i.children[1]),e.querySelector(".text").classList.remove("clickable"))}function g(t,e){var i={ref_:t,pageAction:e,pt:o.MetricsInfo.getPageType(),spt:o.MetricsInfo.getSubpageType(),ht:"actionOnly"},n=new XMLHttpRequest;n.open("POST","/tr/"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}(i))}function l(n,o){return new Promise(function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&(200===this.status?t(!0):e(!1))},i.open("POST",o),i.timeout=1e4,i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("voteValue="+n)})}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".imdb-user-review");n(Array.from(t))})},{iui:"iui"}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();i.autoInit=function(t){var e=t.querySelectorAll("["+w+"]");e.length&&S(Array.from(e))},i.autoInitElements=S,i.autoInitElementsInArray=function(t){S(t.map(function(t){return t.querySelector("["+w+"]")}))};var s=t("iui");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a="/watchlist",r="/list/_ajax/watchlist_has",l="/tr/",u="uc-add-wl--in-wl",c="uc-add-wl--not-in-wl",d="uc-add-wl--pending",h="add-to-watchlist-widget-sync-pending",f="add-to-watchlist-widget-sync-not-pending",p="add-to-watchlist-widget-sync-watchlisted",g="add-to-watchlist-widget-sync-not-watchlisted",v="watchlist-add",m="watchlist-del",y="tmp-watchlist-add",b="Click to add to watchlist",_="Click to remove from watchlist",w="data-uc-add-wl",k=function(){function e(t){o(this,e),this.widget=t,this.titleId=this.widget.dataset.titleId,this.autoInit()}return n(e,[{key:"autoInit",value:function(){this.widget.addEventListener("click",this.handleWidgetClick.bind(this))}},{key:"isWatchlistedState",value:function(){return"true"===this.widget.dataset.isWatchlisted}},{key:"isLoggedIn",value:function(){return"true"===this.widget.dataset.isLoggedIn}},{key:"handleWidgetClick",value:function(){this.isLoggedIn()?this.handleUserLoggedIn():this.taskCompletion()}},{key:"handleUserLoggedIn",value:function(){this.isWatchlistedState()?this.removeFromWatchList():this.addToWatchlist()}},{key:"addToWatchlist",value:function(){var t={url:a+"/"+this.titleId,method:"PUT"};this.updateWatchlistData(t,v+"-"+this.titleId)}},{key:"removeFromWatchList",value:function(){var t={url:a+"/"+this.titleId,method:"DELETE"};this.updateWatchlistData(t,m+"-"+this.titleId)}},{key:"markAsWatchlisted",value:function(){this.widget.className=this.widget.className.replace(c,u),this.widget.dataset.isWatchlisted="true",this.widget.title=_}},{key:"markAsNotWatchListed",value:function(){this.widget.className=this.widget.className.replace(u,c),this.widget.dataset.isWatchlisted="false",this.widget.title=b}},{key:"updateWatchlistData",value:function(t,e){var i=new XMLHttpRequest,n=this;i.open(t.method,t.url,!0),i.onreadystatechange=function(){i.readyState===i.DONE&&(200===i.status&&200===JSON.parse(this.responseText).status&&(n.isWatchlistedState()?n.createEvent(g):n.createEvent(p),n.recordMetric(e)));n.createEvent(f)},this.createEvent(h),i.send()}},{key:"taskCompletion",value:function(){var t=this.recordMetric(y+"-"+this.titleId),e=encodeURIComponent(window.location.pathname+window.location.search),i="https://"+window.location.hostname+"/taskcompletion/issue/addToWatchlist?titleId="+this.titleId+"&u="+e+"&ref_=wl_lgin";t.onload=function(){window.location=i},t.onerror=function(){window.location=i}}},{key:"showActionPending",value:function(){this.widget.className=this.widget.className+" "+d}},{key:"showActionNotPending",value:function(){this.widget.className=this.widget.className.replace(d,"").trim()}},{key:"getTitleId",value:function(){return this.titleId}},{key:"createEvent",value:function(t){var e=document.createEvent("Event");e.initEvent(t,!0,!0),this.widget.dispatchEvent(e)}},{key:"recordMetric",value:function(t){var e=new XMLHttpRequest;if(this.widget.dataset.recordMetric){var i=s.MetricsInfo.getPageType()?s.MetricsInfo.getPageType():"other",n=s.MetricsInfo.getSubpageType()?s.MetricsInfo.getSubpageType():"other",o={ref_:(this.widget.dataset.refTagPrefix&&this.widget.dataset.refTagPrefix+"_")+this.widget.dataset.widgetType,pageAction:t,pt:i,spt:n,ht:"actionOnly",const:this.titleId};e.open("POST",l,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(T(o))}return e}}]),e}(),L=function(){function t(){o(this,t),this.widgets={}}return n(t,[{key:"autoInit",value:function(t){var i=this;t.forEach(function(t){var e=new k(t);i.widgets[e.getTitleId()]||(i.widgets[e.getTitleId()]=[]),i.widgets[e.getTitleId()].push(e)});var e=Object.keys(this.widgets);this.widgets[e[0]][0].isLoggedIn()&&(this.checkIfWatchlisted(e),this.registerToEvents())}},{key:"checkIfWatchlisted",value:function(t){var e=new XMLHttpRequest,i={"consts[]":t,tracking_tag:"addToWatchlistWidget"},n=this;e.open("POST",r,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){e.readyState===e.DONE&&(200===e.status&&200===JSON.parse(this.responseText).status&&n.initAsWatchlisted(JSON.parse(this.responseText).has));n.syncAsNotPending(t)},this.syncAsPending(t),e.send(T(i))}},{key:"initAsWatchlisted",value:function(t){var e=this;Object.keys(t).forEach(function(t){e.widgets[t].forEach(function(t){t.markAsWatchlisted()})})}},{key:"registerToEvents",value:function(){this.registerEvent(h,this.syncAsPending),this.registerEvent(f,this.syncAsNotPending),this.registerEvent(p,this.syncAsWatchlisted),this.registerEvent(g,this.syncAsNotWatchlisted)}},{key:"registerEvent",value:function(t,e){var i=this;document.addEventListener(t,function(t){e.call(i,[t.target.dataset.titleId])})}},{key:"syncAsPending",value:function(t){this.applyWidgets(t,function(t){return t.showActionPending()})}},{key:"syncAsNotPending",value:function(t){this.applyWidgets(t,function(t){return t.showActionNotPending()})}},{key:"syncAsWatchlisted",value:function(t){this.applyWidgets(t,function(t){return t.markAsWatchlisted()})}},{key:"syncAsNotWatchlisted",value:function(t){this.applyWidgets(t,function(t){return t.markAsNotWatchListed()})}},{key:"applyWidgets",value:function(t,e){var i=this;t.forEach(function(t){i.widgets[t].forEach(e)})}}]),t}(),E=null;function S(t){null===E&&(E=new L),E.autoInit(t)}function T(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{iui:"iui"}],10:[function(t,e,i){"use strict";var n=t(8);t(4),t(2),t(3),t(44),t(33),t(31),t(32),t(29),t(30),t(34),t(36),t(37),t(35),t(38),t(39),t(40),t(41),t(42),t(43),t(45),t(46),document.addEventListener("DOMContentLoaded",function(){(0,n.autoInitListerControlsForm)()})},{2:2,29:29,3:3,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,4:4,40:40,41:41,42:42,43:43,44:44,45:45,46:46,8:8}],11:[function(t,e,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var i=t(12);function c(t){return"undefined"!=typeof document&&document.head.querySelector("meta[property='"+t+"']")&&document.head.querySelector("meta[property='"+t+"']").getAttribute("content")||void 0}function n(t){return void 0===t&&(t=i.createUserLoginState),u.userLoginState||(u.userLoginState=t()),u.userLoginState.getLoggedInStatus()}u.PAGE_TYPE_META_KEY="pageType",u.SUB_PAGE_TYPE_META_KEY="subpageType",u.redirectToLoginPage=function(t){var e=encodeURIComponent(window.location.pathname+window.location.search),i="https://"+window.location.hostname+"/registration/signin?u="+e+"&ref_="+t;return window.location=i},u.redirectToLoginPageWithTaskCompletion=function(t,e,i,n,o){var s=n||c(u.PAGE_TYPE_META_KEY),a=o||c(u.SUB_PAGE_TYPE_META_KEY),r=encodeURIComponent(window.location.pathname+window.location.search),l="https://"+window.location.host+"/taskcompletion/issue/rateTitle?titleId="+e+"&value="+t+"&u="+r+(i?"&refTag=tmp_"+i:"")+(s?"&pageType="+s:"")+(a?"&subPageType="+a:"");return window.location=l},u.isUserLoggedIn=n,u.default=n},{12:12}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=window.XMLHttpRequest),this.Requester=t,this.requestUrl="/registration/is-user-recognized",this.isLoggedIn=void 0,this.hasTestedLogin=!1}return t.prototype.getLoggedInStatus=function(){if(this.hasTestedLogin)return this.isLoggedIn;var t=new this.Requester;return t.open("GET",this.requestUrl,!1),t.send(),this.isLoggedIn=this.getLoginStateFromResponse(t.response),this.hasTestedLogin=!0,this.isLoggedIn},t.prototype.getLoginStateFromResponse=function(t){return JSON.parse(t).isUserRecognized||!1},t}();i.UserLoginDetection=n,i.createUserLoginState=function(t){return new n(t)}},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=s,i.autoInit=function(t){var e=t.getElementsByClassName(n);Array.from(e).filter(function(t){return 0===t.getElementsByTagName("select").length}).forEach(function(t){return s(t)})};var n="ipl-expander",o="ipl-expander--expanded";function s(t){t.addEventListener("click",function(){t.classList.toggle(o)})}},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=n,i.autoInit=function(t){var e=t.getElementsByClassName("ipl-hideable-trigger");Array.from(e).forEach(function(t){n(t)})};var r="ipl-hideable-trigger--active",l="ipl-hideable-trigger--inactive",u="ipl-hideable-container--shown",c="ipl-hideable-container--hidden";function n(t){var e=document.getElementById(t.getAttribute("data-target"));if(!e)throw new Error("No data-target defined for hideable trigger: "+t.id);var a=e.getElementsByClassName("ipl-hideable-container");t.addEventListener("click",function(t){var e,i,n,o,s;t.preventDefault(),e=t.target,i=e.getAttribute("data-initial-text"),(n=e.getAttribute("data-secondary-text"))&&(e.text===i?e.textContent=n:e.text===n&&(e.textContent=i)),(o=t.target).classList.contains(r)?(o.classList.remove(r),o.classList.add(l)):o.classList.contains(l)&&(o.classList.remove(l),o.classList.add(r)),s=a,Array.from(s).forEach(function(t){t.classList.contains(c)?(t.classList.remove(c),t.classList.add(u)):t.classList.contains(u)&&(t.classList.remove(u),t.classList.add(c))})})}},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.loadMoreClickHandler=n,i.default=function(e,i){e.addEventListener("click",function(t){n(e,i)})};var s="ipl-load-more--loaded",a="ipl-load-more--loading",r="ipl-load-more--loaded-all",l="ipl-load-more--error",u="An error has occured. Please try again.";function c(t,e){t.classList.remove(s),t.classList.remove(a),t.classList.remove(r),t.classList.remove(l),t.classList.add(e)}function d(t,e){t.innerHTML=e}function n(t,e){var i=t.parentNode,n=document.getElementById(t.getAttribute("data-target-container")),o=i.getElementsByClassName("ipl-load-more__error-text")[0];return c(i,a),d(o,""),e().then(function(t){if("boolean"!=typeof t.hasMore||"string"!=typeof t.html)return c(i,l),void d(o,u);n.insertAdjacentHTML("beforeend",t.html),!1===t.hasMore?c(i,r):c(i,s)}).catch(function(t){d(o,"string"==typeof t?t:u),c(i,l)})}},{}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=r,i.autoInit=function(t){var e=t.getElementsByClassName(o);Array.from(e).forEach(function(t){t.classList.remove(s),r(t)})};var c=n(t(18)),d=n(t(21)),h=n(t(17)),f=n(t(19)),p=n(t(20));function n(t){return t&&t.__esModule?t:{default:t}}var o="ipl-multi-select",s="ipl-multi-select--initial",g="ipl-multi-select__initial",v="ipl-multi-select__input",m="ipl-multi-select__dropdown-list",y="ipl-multi-select__selected-list";function a(t){var e=t.getElementsByClassName(g)[0],i=t.getElementsByClassName(v)[0],n=t.getElementsByClassName(m)[0],o=t.getElementsByClassName(y)[0],s=new d.default(e),a=new c.default(t,s),r=new f.default(i,s,a),l=new h.default(n,s,a),u=new p.default(o,s,a);s.init(),l.init(),r.init(),u.init()}function r(t){return new a(t)}},{17:17,18:18,19:19,20:20,21:21}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var s="ipl-multi-select__dropdown-option",n=function(){function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.dropDownParentNode=t,this.stateManager=e,this.focusManager=i}return o(n,[{key:"_addOptionsListeners",value:function(n){var o=this;n.forEach(function(t,e){var i=t.getAttribute("data-value");t.addEventListener("keydown",function(t){switch(t.key){case"ArrowDown":t.preventDefault(),e<n.length-1&&n[e+1].focus();break;case"ArrowUp":t.preventDefault(),0<e?n[e-1].focus():o.focusManager.focusInput();break;case"Enter":t.preventDefault(),o.stateManager.selectOption(i),o.focusManager.focusInput();break;case"Escape":t.preventDefault(),o._clearDropdownList();break;case"Tab":t.preventDefault(),t.shiftKey?o.focusManager.focusInput():o._clearDropdownList()}}),t.addEventListener("click",function(t){t.preventDefault(),o.stateManager.selectOption(i),o.stateManager.showDropdown(),o.focusManager.focusInput()}),t.addEventListener("focus",function(t){o.focusManager.addFocusClass(t)}),t.addEventListener("blur",function(t){o.focusManager.clearFocusedStateOnComponentBlur()})})}},{key:"_clearDropdownList",value:function(){this.dropDownParentNode.innerHTML=""}},{key:"_openDropDownList",value:function(t){var i="";t.forEach(function(t){var e='<a class="'+s+'" href="#" data-value="'+t.value+'">'+t.text+"</a>";i+=e}),this.dropDownParentNode.innerHTML=i;var e=Array.from(this.dropDownParentNode.getElementsByClassName(s));this._addOptionsListeners(e)}},{key:"render",value:function(t){var e=2<=t.inputValue.length;t.showDropdown?e?this._openDropDownList(t.matchedOptions):this._openDropDownList(t.unselectedOptions):this._clearDropdownList()}},{key:"init",value:function(){this.stateManager.subscribe(this.render.bind(this))}}]),n}();i.default=n},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var o="ipl-multi-select--focused",s="ipl-multi-select__input",a="ipl-multi-select__dropdown-option",r="ipl-multi-select__selected-option",l=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.parentNode=t,this.stateManager=e}return n(i,[{key:"clearFocusedStateOnComponentBlur",value:function(){var t=this;setTimeout(function(){document.activeElement&&(document.activeElement.classList.contains(a)||document.activeElement.classList.contains(r)||document.activeElement.classList.contains(s)||document.activeElement.classList.contains("ipl-multi-select__selected-list"))||(t.removeFocusClass(),t.stateManager.hideDropdown())},10)}},{key:"removeFocusClass",value:function(){this.parentNode.classList.remove(o)}},{key:"addFocusClass",value:function(){this.parentNode.classList.add(o)}},{key:"focusInput",value:function(){this.parentNode.getElementsByClassName(s)[0].focus()}},{key:"focusFirstOption",value:function(){var t=this.parentNode.getElementsByClassName(a)[0];t&&t.focus()}},{key:"focusLastSelectedOption",value:function(){var t=Array.from(this.parentNode.getElementsByClassName(r)).slice(-1)[0];t&&t.focus()}}]),i}();i.default=l},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var n=function(){function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.inputNode=t,this.stateManager=e,this.focusManager=i}return o(n,[{key:"_addInputListeners",value:function(){var e=this;this.inputNode.addEventListener("keydown",function(t){if("ArrowDown"===t.key)return t.preventDefault(),void e.focusManager.focusFirstOption();if("Escape"!==t.key){if("ArrowUp"===t.key&&0<e.stateManager.getState().selectedOptions.length)return t.preventDefault(),void e.focusManager.focusLastSelectedOption();if(0===t.target.value.length&&0<e.stateManager.getState().selectedOptions.length){if("ArrowLeft"===t.key)return t.preventDefault(),void e.focusManager.focusLastSelectedOption();"Backspace"===t.key&&(e.stateManager.deselectLastSelectedOption(),e.focusManager.focusInput())}}else e.stateManager.hideDropdown()}),this.inputNode.addEventListener("keyup",function(t){e.stateManager.updateInputValue(t.target.value)}),this.inputNode.addEventListener("click",function(t){e.stateManager.showDropdown()}),this.inputNode.addEventListener("focus",function(t){e.focusManager.addFocusClass()}),this.inputNode.addEventListener("blur",function(t){e.focusManager.clearFocusedStateOnComponentBlur()})}},{key:"render",value:function(t){t.inputValue!==this.inputNode.value&&(this.inputNode.value=t.inputValue)}},{key:"init",value:function(){this._addInputListeners(),this.stateManager.subscribe(this.render.bind(this))}}]),n}();i.default=n},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var s="ipl-multi-select__selected-option",n=function(){function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.selectedParentNode=t,this.stateManager=e,this.focusManager=i}return o(n,[{key:"_addParentListeners",value:function(){var t=this;this.selectedParentNode.addEventListener("mousedown",function(){event.preventDefault(),t.focusManager.addFocusClass(event),t.focusManager.focusInput()})}},{key:"_addSelectedListeners",value:function(n,t){var o=this;n.forEach(function(t,e){var i=t.getAttribute("data-value");t.addEventListener("keydown",function(t){switch(t.key){case"ArrowRight":t.preventDefault(),e<n.length-1?n[e+1].focus():o.focusManager.focusInput();break;case"ArrowLeft":t.preventDefault(),0<e&&n[e-1].focus();break;case"Backspace":case"Enter":t.preventDefault(),o.stateManager.deselectOption(i),o.focusManager.focusInput();break;case"Escape":t.preventDefault(),o.stateManager.hideDropdown();break;case"Tab":t.shiftKey?o.stateManager.hideDropdown():(t.preventDefault(),o.focusManager.focusInput())}}),t.addEventListener("click",function(t){t.preventDefault(),o.stateManager.deselectOption(i),o.focusManager.focusInput()}),t.addEventListener("focus",function(t){o.focusManager.addFocusClass(t)}),t.addEventListener("blur",function(t){o.focusManager.clearFocusedStateOnComponentBlur()})})}},{key:"render",value:function(t){var i="";t.selectedOptions.forEach(function(t){var e='<a class="'+s+'" href="#" data-value="'+t.value+'">'+t.text+"</a>";i+=e}),this.selectedParentNode.innerHTML=i;var e=Array.from(this.selectedParentNode.getElementsByClassName(s));this._addSelectedListeners(e)}},{key:"init",value:function(){this._addParentListeners(),this.stateManager.subscribe(this.render.bind(this))}}]),n}();i.default=n},{}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNode=t,this.subscribed=[],this.state={selectedOptions:[],unselectedOptions:[],showDropdown:!0,inputValue:"",matchedOptions:[]}}return n(e,[{key:"_pullDataFromSource",value:function(){var t=Array.from(this.sourceNode.options),e=[],i=[];t.forEach(function(t){t.selected?i.push({value:t.value,text:t.text}):e.push({value:t.value,text:t.text})}),this.state.selectedOptions=i,this.state.unselectedOptions=e}},{key:"_updateSource",value:function(){var t=this;Array.from(this.sourceNode.options).forEach(function(e){e.selected=t.state.selectedOptions.some(function(t){return t.value.toLowerCase()===e.value.toLowerCase()})}),this._pullDataFromSource()}},{key:"_updateStateWithMatchedOptions",value:function(){var i=this,t=[];2<=this.state.inputValue.length&&(t=this.state.unselectedOptions.filter(function(t){var e=t.text.toLowerCase();return!(!t.value.toLowerCase().includes(i.state.inputValue.toLowerCase())&&!e.includes(i.state.inputValue.toLowerCase()))})),this.state.matchedOptions=t}},{key:"updateSubscribers",value:function(){var e=this;this.subscribed.forEach(function(t){t(e.state)})}},{key:"selectOption",value:function(i){var n=this;this.state.unselectedOptions.forEach(function(t,e){t.value.toLowerCase()===i.toLowerCase()&&(n.state.selectedOptions.push(t),n.state.unselectedOptions.splice(e,1))}),this.state.inputValue="",this.state.showDropdown=!1,this._updateSource(),this._updateStateWithMatchedOptions(),this.updateSubscribers()}},{key:"deselectOption",value:function(i){var n=this;this.state.selectedOptions.forEach(function(t,e){t.value.toLowerCase()===i.toLowerCase()&&(n.state.unselectedOptions.push(t),n.state.selectedOptions.splice(e,1))}),this.state.showDropdown=!1,this._updateSource(),this.updateSubscribers()}},{key:"deselectLastSelectedOption",value:function(){var t=this.state.unselectedOptions.slice(-1)[0];this.state.selectedOptions.pop(),this.state.unselectedOptions.push(t),this.state.showDropdown=!1,this._updateSource(),this.updateSubscribers()}},{key:"updateInputValue",value:function(t){this.state.inputValue!==t&&(this.state.inputValue=t,this.state.showDropdown=!0,this._updateStateWithMatchedOptions(),this.updateSubscribers())}},{key:"showDropdown",value:function(){this.state.showDropdown=!0,this.updateSubscribers()}},{key:"hideDropdown",value:function(){this.state.showDropdown=!1,this.updateSubscribers()}},{key:"getState",value:function(){return this.state}},{key:"subscribe",value:function(t){this.subscribed.push(t)}},{key:"init",value:function(){this._pullDataFromSource()}}]),e}();i.default=o},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RatingSelector=i.HIGHLIGHT_CLASS=void 0;var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();i.getRateInfoValues=d,i.autoInit=function(t){var e=t.querySelectorAll('[id^="ipl-rating-selector-tt"]');h(Array.from(e))},i.initRatingsSelectors=h;var o,s=t(25),l=(o=s)&&o.__esModule?o:{default:o},u=t(11),c=t(24);var a=i.HIGHLIGHT_CLASS="ipl-rating-selector__star-link--highlighted";function d(t){return{tconst:t.elements.tconst.value,rating:t.elements.rating.value,trackingTag:t.elements.tracking_tag.value,csrfToken:t.elements.csrfToken.value,pageType:t.elements.pageType.value,subpageType:t.elements.subpageType.value}}var r=i.RatingSelector=function(){function e(t){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.domNode=t,this.stars=Array.from(t.querySelectorAll(".ipl-rating-selector__star-link")),this.displayedValue=t.querySelector(".ipl-rating-selector__rating-value"),this.selectedRatingInput=t.querySelector("input[name=rating]"),this.form=t.querySelector(".ipl-rating-selector__star-list"),this.resetButton=t.querySelector(".ipl-rating-selector__reset a"),this.stars.forEach(function(i){i.addEventListener("mouseenter",function(){n.render(i.getAttribute("data-value"))}),i.addEventListener("touchstart",function(t){t.preventDefault(),i.click()}),i.addEventListener("click",function(t){t.preventDefault();var e=i.getAttribute("data-value");n.setValue(e),n.emitEvent("ratingselect"),n.submitRating()})}),this.form.addEventListener("mouseleave",function(t){t.stopPropagation(),n.render(n.selectedRatingInput.value)}),this.form.addEventListener("submit",function(t){t.preventDefault()}),this.resetButton.addEventListener("touchstart",function(t){t.preventDefault(),n.resetButton.click()}),this.resetButton.addEventListener("click",function(t){t.preventDefault(),n.setValue(0),n.emitEvent("ratingselect"),n.submitRating()})}return n(e,[{key:"submitRating",value:function(){var e=this,t=d(this.form),i=t.tconst,n=t.rating,o=t.trackingTag,s=t.csrfToken,a=t.pageType,r=t.subpageType;(0,u.isUserLoggedIn)()||!(0,c.shouldUseRatingTaskCompletion)()?(0,l.default)(i,n,o,s,a,r).then(function(t){(0,u.isUserLoggedIn)()&&(e.emitEvent("ratingsuccess",t),e.updateInitialState())},function(t){e.emitEvent("ratingerror",t),e.toggleErrorState()}).catch(function(t){e.emitEvent("ratingerror",t),e.toggleErrorState()}):(0,c.doRatingTaskCompletion)(i,n,o)}},{key:"setValue",value:function(t){this.selectedRatingInput.value=t,this.render(t)}},{key:"render",value:function(t){for(var e=parseInt(t),i=0;i<e;i++)this.stars[i].classList.add(a);for(var n=e;n<this.stars.length;n++)this.stars[n].classList.remove(a);this.displayedValue.textContent=e}},{key:"emitEvent",value:function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),e&&(i.sourceEvent=e),this.domNode.dispatchEvent(i)}},{key:"updateInitialState",value:function(){this.domNode.setAttribute("data-value",this.form.elements.rating.value)}},{key:"toggleErrorState",value:function(){var t=this;this.setValue(this.domNode.getAttribute("data-value")),this.emitEvent("ratingerrormessageopen"),this.domNode.classList.add("ipl-rating-selector--error"),setTimeout(function(){t.domNode.classList.remove("ipl-rating-selector--error"),t.emitEvent("ratingerrormessageclose")},2e3)}}]),e}();function h(t){t.forEach(function(t){return new r(t)})}},{11:11,24:24,25:25}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();i.autoInit=function(t){var e=t.querySelectorAll(".ipl-rating-interactive");u(Array.from(e))},i.initRatingsStarInteractive=u;var o=t(11),s=t(24);var a="ipl-rating-interactive--no-rating",r="ipl-rating-interactive__loader--visible",l=function(){function i(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.root=t,this.checkbox=t.querySelector(".ipl-rating-interactive__state"),this.star=t.querySelector(".ipl-rating-interactive__star-container"),this.rating=t.querySelector(".ipl-rating-star__rating"),this.ratingSelector=t.querySelector('[id^="ipl-rating-selector-tt"]'),this.loadingMessage=t.querySelector(".ipl-rating-interactive__loader"),this.isShowingError=!1,this.timer=null,this.ratingSelector.children[0].addEventListener("mouseleave",function(){e.isSelectorOpen()&&(e.timer=setTimeout(function(){e.isShowingError||e.closeSelector()},1e3))}),this.checkbox.addEventListener("click",function(t){(0,o.isUserLoggedIn)()||(0,s.shouldUseRatingTaskCompletion)()||(t.preventDefault(),(0,o.redirectToLoginPage)(e.checkbox.dataset.reftag))}),this.ratingSelector.children[0].addEventListener("mouseenter",function(){clearTimeout(e.timer)}),this.ratingSelector.addEventListener("ratingselect",function(){e.closeSelector(),e.showLoadingProgress()}),this.ratingSelector.addEventListener("ratingsuccess",function(){e.hideLoadingProgress(),e.updateFromRatingSelector()}),this.ratingSelector.addEventListener("ratingerror",function(){e.isShowingError=!0,e.hideLoadingProgress(),e.openSelector()}),this.ratingSelector.addEventListener("ratingerrormessageclose",function(){e.isShowingError=!1,e.closeSelector()})}return n(i,[{key:"updateFromRatingSelector",value:function(){var t=this.ratingSelector.querySelector("input[name=rating]");this.rating.textContent=t.value,0<parseInt(t.value,10)?this.root.classList.remove(a):this.root.classList.add(a)}},{key:"openSelector",value:function(){this.checkbox.checked=!0}},{key:"closeSelector",value:function(){this.checkbox.checked=!1}},{key:"isSelectorOpen",value:function(){return this.checkbox.checked}},{key:"showLoadingProgress",value:function(){this.star.style.display="none",this.loadingMessage.classList.add(r)}},{key:"hideLoadingProgress",value:function(){this.star.style.display="inline",this.loadingMessage.classList.remove(r)}}]),i}();function u(t){t.forEach(function(t){return new l(t)})}},{11:11,24:24}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.doRatingTaskCompletion=function(t,e,i,n,o){var s=(0,a.redirectToLoginPageWithTaskCompletion)(e,t,i,n,o);window.location=s},i.shouldUseRatingTaskCompletion=function(){return window.useRatingTaskCompletion};var a=t(11)},{11:11}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e,i,n,o,s){(0,h.isUserLoggedIn)()&&n||((0,f.shouldUseRatingTaskCompletion)()?(0,f.doRatingTaskCompletion)(t,e,i):(0,h.redirectToLoginPage)(i));return a=t,r=e,l=i,u=n,c=o,d=s,new Promise(function(e,i){var t=new XMLHttpRequest,n=v(a,r,l,u,c,d);t.open("POST",p),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.timeout=g,t.onreadystatechange=function(t){4===this.readyState&&(200===this.status?e(t):i(t))},t.ontimeout=function(t){i(t)},t.onerror=function(t){i(t)},t.send(n)});var a,r,l,u,c,d},i.createRateRequestBody=v;var h=t(11),f=t(24),p="/ratings/_ajax/title",g=1e4;function v(t,e,i,n,o,s){var a={tconst:t,rating:e,csrfToken:n,pageType:o,subpageType:s};return a.tracking_tag=i,Object.keys(a).filter(function(t){return!!a[t]}).map(function(t){return t+"="+a[t]}).join("&")}},{11:11,24:24}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function c(t,e){"inline-block"!==t.parentElement.children[1].style.display&&(e.style.display="inline-block",t.style.display="none")}function d(t,e,i,n){var o=t.getAttribute("rating"),s=e.children[0].getAttribute("data-user");!function(t,e,i,n,o,s,a,r){if(!i)return document.location="/registration/signin?u="+window.location.href;var l=new XMLHttpRequest;l.open("POST","/ratings/_ajax/title"),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.timeout=1e4,l.onreadystatechange=function(){4===this.readyState&&(200===this.status?("0"===e?(a.classList.remove("rating-rated"),a.classList.add("rating-not-rated"),a.children[2].textContent="Rate"):(a.classList.remove("rating-not-rated"),a.classList.add("rating-rated"),a.children[2].textContent=e),r.style.display="none",a.style.display="inline-block"):h(s,r,a))},l.ontimeout=function(){h(s,r,a)},a.style.display="none",r.style.display="inline-block",s.style.display="none";var u="tconst="+t+"&rating="+e+"&csrfToken="+o+"&tracking_tag="+n;l.send(u)}(e.children[0].getAttribute("id"),o,s,e.children[0].getAttribute("refTag"),e.children[0].getAttribute("data-csrf-token"),e,i,n)}function h(t,e,i){e.style.display="none";var n=t.parentElement.children[3];n.style.display="inline-block",setTimeout(function(){n.style.display="none",c(t,i)},1e3)}i.autoInit=function(t){for(var u=(t&&"function"===t.querySelectorAll?t:window.document).querySelectorAll('[id^="urv"]'),e=function(e){var t=u[e].parentElement,i=t.querySelector(".ipl-star-bar-widget");if(void 0===i)return{v:void 0};u[e].onclick=function(){var t;t=u[e],i.style.display="inline-block",t.style.display="none"},i.onmouseleave=function(){c(i,u[e])};for(var n=t.querySelector(".rating-pending"),o=i.querySelector(".rating-stars").children,s=i.querySelector(".value"),a=function(t){o[t].onmouseenter=function(){!function(t,e,i){var n=t.getAttribute("rating");i.textContent=n;for(var o=0;o<n;o++)e[o].setAttribute("class","rating-hover");for(var s=n;s<e.length;s++)e[s].setAttribute("class","")}(o[t],o,s)},o[t].onclick=function(){d(o[t],i,u[e],n)}},r=0;r<o.length;r++)a(r);var l=i.querySelector(".rating-cancel").firstChild;l.onclick=function(){d(l,i,u[e],n)}},i=0;i<u.length;i++){var n=e(i);if("object"===(void 0===n?"undefined":o(n)))return n.v}}},{}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=o,i.autoInit=function(t){var e=t.getElementsByClassName(n);Array.from(e).forEach(o)};var n="ipl-tabset",s="ipl-tabset__tab-container",a="ipl-tabset__tab--selected";function o(t){var e=t.getElementsByClassName(s)[0],i=t.getElementsByClassName(a)[0];if(i){var n=e.offsetWidth,o=i.offsetLeft-e.offsetLeft;e.scrollLeft=o+i.offsetWidth-n}}},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shouldUseRatingTaskCompletion=i.doRatingTaskCompletion=i.tabSet=i.loadMore=i.starbarwidgetAutoInit=i.starbarwidget=i.ratingStarInteractiveAutoInit=i.ratingSelectorAutoInit=i.multiSelectAutoInit=i.expanderAutoInit=i.expander=i.hideableAutoInit=i.hideable=void 0,i.iplInitDocFragment=m,i.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;"complete"===e.readyState?t(e):i.addEventListener("load",function(){return t(e)})};var n=t(13),o=v(n),s=t(14),a=v(s),r=t(16),l=t(26),u=v(l),c=t(22),d=t(23),h=t(27),f=v(h),p=v(t(15)),g=t(24);function v(t){return t&&t.__esModule?t:{default:t}}function m(t){if(!t||"function"!=typeof t.querySelectorAll)throw new Error("the docFragment argument must be a NodeList or HTMLCollection");(0,n.autoInit)(t),(0,s.autoInit)(t),(0,r.autoInit)(t),(0,c.autoInit)(t),(0,d.autoInit)(t),(0,h.autoInit)(t)}i.hideable=a.default,i.hideableAutoInit=s.autoInit,i.expander=o.default,i.expanderAutoInit=n.autoInit,i.multiSelectAutoInit=r.autoInit,i.ratingSelectorAutoInit=c.autoInit,i.ratingStarInteractiveAutoInit=d.autoInit,i.starbarwidget=u.default,i.starbarwidgetAutoInit=l.autoInit,i.loadMore=p.default,i.tabSet=f.default,i.doRatingTaskCompletion=g.doRatingTaskCompletion,i.shouldUseRatingTaskCompletion=g.shouldUseRatingTaskCompletion},{13:13,14:14,15:15,16:16,22:22,23:23,24:24,26:26,27:27}],29:[function(t,e,i){var n;n=function(n){return n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(e){return function(t){return!!n.data(t,e)}}):function(t,e,i){return!!n.data(t,i[3])}})},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],30:[function(t,e,i){var n;n=function(t){return t.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var e},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],31:[function(t,e,i){var n;n=function(t){return t.ui.escapeSelector=(e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(e,"\\$1")});var e},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],32:[function(t,e,i){var n;n=function(l){return l.ui.focusable=function(t,e){var i,n,o,s,a,r=t.nodeName.toLowerCase();return"area"===r?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(0<(o=l("img[usemap='#"+n+"']")).length&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(r)?(s=!t.disabled)&&(a=l(t).closest("fieldset")[0])&&(s=!a.disabled):s="a"===r&&t.href||e,s&&l(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(l(t)))},l.extend(l.expr[":"],{focusable:function(t){return l.ui.focusable(t,null!=l.attr(t,"tabindex"))}}),l.ui.focusable},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],33:[function(t,e,i){var n;n=function(t){return t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],34:[function(t,e,i){var n;n=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],35:[function(t,e,i){var n;n=function(r){"1.7"===r.fn.jquery.substring(0,3)&&(r.each(["Width","Height"],function(t,i){var o="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),s={innerWidth:r.fn.innerWidth,innerHeight:r.fn.innerHeight,outerWidth:r.fn.outerWidth,outerHeight:r.fn.outerHeight};function a(t,e,i,n){return r.each(o,function(){e-=parseFloat(r.css(t,"padding"+this))||0,i&&(e-=parseFloat(r.css(t,"border"+this+"Width"))||0),n&&(e-=parseFloat(r.css(t,"margin"+this))||0)}),e}r.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){r(this).css(n,a(this,t)+"px")})},r.fn["outer"+i]=function(t,e){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){r(this).css(n,a(this,t,!0,e)+"px")})}}),r.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))})},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],36:[function(t,e,i){var n;n=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],37:[function(t,e,i){var n;n=function(s){return s.fn.labels=function(){var t,e,i,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+s.ui.escapeSelector(i)+"']",n=n.add(o.find(e).addBack(e))),this.pushStack(n))}},"function"==typeof define&&define.amd?define(["jquery","./version","./escape-selector"],n):n(jQuery)},{}],38:[function(t,e,i){var n;n=function(s){return s.ui.plugin={add:function(t,e,i){var n,o=s.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var o,s=t.plugins[e];if(s&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)t.options[s[o][0]]&&s[o][1].apply(t.element,i)}}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],39:[function(t,e,i){var n;n=function(t){return t.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i||(i=e.body),i.nodeName||(i=e.body),i}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],40:[function(t,e,i){var n;n=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],41:[function(t,e,i){var n;n=function(s){return s.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=s(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:s(this[0].ownerDocument||document)}},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],42:[function(t,e,i){var n;n=function(n){return n.extend(n.expr[":"],{tabbable:function(t){var e=n.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&n.ui.focusable(t,i)}})},"function"==typeof define&&define.amd?define(["jquery","./version","./focusable"],n):n(jQuery)},{}],43:[function(t,e,i){var n;n=function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}});var e},"function"==typeof define&&define.amd?define(["jquery","./version"],n):n(jQuery)},{}],44:[function(t,e,i){var n;n=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"},"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)},{}],45:[function(t,e,i){var n;n=function(s){var t;return s.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===s.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var i="iconPosition"!==t,n=i?this.options.iconPosition:e,o="top"===n||"bottom"===n;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=s("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,e),this._attachIcon(n),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=s("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==s.uiBackCompat&&(s.widget("ui.button",s.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),s.fn.button=(t=s.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(s.ui.checkboxradio||s.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),s.fn.buttonset=function(){return s.ui.controlgroup||s.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),s.ui.button},"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],n):n(jQuery)},{}],46:[function(t,e,i){var n;n=function(l){return l.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=l(this).css(t).offset().top;e<0&&l(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&l.fn.draggable&&this._makeDraggable(),this.options.resizable&&l.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?l(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:l.noop,enable:l.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||l.ui.safeBlur(l.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+l(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=l(l.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=l.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||l.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=l("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===l.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===l.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),n=e.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=l("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){l(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=l("<button type='button'></button>").button({label:l("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=l("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=l("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=l("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),l.isEmptyObject(t)||l.isArray(t)&&!t.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(l.each(t,function(t,e){var i,n;e=l.isFunction(e)?{click:e,text:t}:e,e=l.extend({type:"button"},e),i=e.click,n={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,l("<button></button>",e).button(n).appendTo(o.uiButtonSet).on("click",function(){i.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,s=this.options;function a(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){o._addClass(l(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,a(e))},drag:function(t,e){o._trigger("drag",t,a(e))},stop:function(t,e){var i=e.offset.left-o.document.scrollLeft(),n=e.offset.top-o.document.scrollTop();s.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:o.window},o._removeClass(l(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,a(e))}})},_makeResizable:function(){var s=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),i="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:i,start:function(t,e){s._addClass(l(this),"ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",t,r(e))},resize:function(t,e){s._trigger("resize",t,r(e))},stop:function(t,e){var i=s.uiDialog.offset(),n=i.left-s.document.scrollLeft(),o=i.top-s.document.scrollTop();a.height=s.uiDialog.height(),a.width=s.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=o?"+":"")+o,of:s.window},s._removeClass(l(this),"ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",t,r(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=l(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=l.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};l.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(o[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,n,o=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:l("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!e&&o.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=o.is(":data(ui-resizable)"))&&!e&&o.resizable("destroy"),n&&"string"==typeof e&&o.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=l(this);return l("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!l(t.target).closest(".ui-dialog").length||!!l(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=l("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==l.uiBackCompat&&l.widget("ui.dialog",l.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),l.ui.dialog},"function"==typeof define&&define.amd?define(["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],n):n(jQuery)},{}]},{},[10]);